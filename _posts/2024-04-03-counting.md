---
title: "Counting cards"
date: 2024-04-03
---

Given that we've heavily restricted the space of possible decks, one question we might want to know the answer to is: how many distinct decks that adhere to these restrictions can even be constructed?  I.e., how many unique 40-card decks are there that consist exclusively of some combination of Baneslayer Angels, Mulldrifters, Plains, and Islands?  Once we know the number of possible decks, we'll want to answer the related question: how many possible 1-vs-1 matchups are there?

The idea here is that if we can enumerate all possible decks, then we can enumerate all possible matchups. And if we can enumerate all possible matchups, then we can plausibly simulate each of those matchups.  The results of those simulations should allows us to determine which single deck stands above the rest.

***

### Partitioning

The approach I'm going to take to answering the above questions is related to the mathematics of [partitioning](https://en.wikipedia.org/wiki/Integer_partition), and with these sorts of problems I find it helpful to start with a simpler example and then build up to the full question.

The simpler question I'll start with is the following: how many unique 5-card decks are there that consist exclusively of some combination of Baneslayer Angels and Mulldrifters?  An initial thought might look something like:

> Well, there are 5 possible card slots in the deck, and there are 2 possible card options for each slot.  So the total number is 2^5 = 32 possible decks.

The problem with this line of thinking is that it treats the order of the cards in the deck as important.  For instance, if we denote a Baneslayer Angel using a "B" and a Mulldrifter using an "M," then this counting scheme treats the decks MBMMM and MMMBM as distinct, when instead we typically think of them as equivalent; we just consider one to be a shuffled version of the other.  So we need a way to count the total number of possible 5-card combinations of B and M while remaining agnostic about the specific ordering of those cards.

But if we don't care about the order of the cards, then that's equivalent to saying that we can pick any ordering scheme we'd like.  So how about picking one that's easy to follow?  Let's always order the decks such that all of the Baneslayer Angels come first, and then all of the Mulldrifters.  If we visualize the cards in a deck using different dots -- let's denote Baneslayer Angel as ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") and Mulldrifter as ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") -- then we can visually display all possible decks as:

![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot")\
![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot")\
![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot")\
![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot")\
![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot")\
![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot")

Using this sort of ordering, it's rather straightforward to see that there are 6 possible decks that adhere to the given restrictions.  And it's also easy to see how to generalize the statement: for a deck that contains $N$ cards, each of which can only be one of two options, then in total there are $N+1$ unique possible such decks.  Let's denote this situation as $P_2(N) = N+1$.

Okay, but how do we generalize further to the case in which there are more than two options for each card in the deck?  To ask the same question using our new notation: what is the value of $P_n(N)$?  To move forward, it might be helpful to understand first why there are $N+1$ possible decks of $N$ cards in the two-option case.  Where does the extra 1 come from?  One way to think about it is that the extra 1 comes from counting the *spaces between the cards* rather than the cards themselves.  I.e., we can think of it as though there are $N+1$ ways to *partition* a set of $N$ cards into two groups.  To accommodate this alternative way of thinking about the problem, we can modify our previous visualization by inserting a divider **|** between the Baneslayers and the Mulldrifters:

![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") **|**\
![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") **|** ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot")\
![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") **|** ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot")\
![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") **|** ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot")\
![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") **|** ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot")\
**|** ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot")

To me, this way of thinking about the problem as one of partitioning the deck into two groups -- and asking the question of how many ways there are to do that -- provides a more intuitive way of understanding how we arrive at the value $N+1$ for $P_2(N)$.

The partitioning approach also generalizes straightforwardly to the case in which there are more than two options for each card in the deck.  For instance, if we consider three options for the same 5-card deck, then we can just add a third colored dot and a second divider.  The visualization becomes:

![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") **|** **|**\
![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") **|** ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") **|**\
![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") **|** ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") **|**\
![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") **|** ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") **|**\
![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") **|** ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") **|**\
**|** ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot")

![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") **|** **|** ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot")\
![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") **|** ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") **|** ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot")\
![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") **|** ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") **|** ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot")\
![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") **|** ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") **|** ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot")\
**|** ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") **|** ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot")

![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") **|** **|** ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot") ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot")\
![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") **|** ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") **|** ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot") ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot")\
![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") **|** ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") **|** ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot") ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot")\
**|** ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") **|** ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot") ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot")

![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") ![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") **|** **|** ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot") ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot") ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot")\
![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") **|** ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") **|** ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot") ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot") ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot")\
**|** ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") **|** ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot") ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot") ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot")

![black dot](https://upload.wikimedia.org/wikipedia/commons/1/11/BlackDot.svg "Black dot") **|** **|** ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot") ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot") ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot") ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot")\
**|** ![gray dot](https://upload.wikimedia.org/wikipedia/commons/f/fe/GrayDot.svg "Gray dot") **|** ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot") ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot") ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot") ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot")

**|** **|** ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot") ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot") ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot") ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot") ![red dot](https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg "Red dot")

Alright, so counting up all of the diagrams yields 21 possible decks.  So there are 21 possible ways to make a 5-card deck using 3 distinct options for each card; equivalently, we can write $P_3(5) = 21$.  But what's more important than the specific value here is the underlying pattern that the above sequence of diagrams reveals.

What we can see happening here is that every time a red dot is introduced, the number of slots remaining for black and/or gray dots is reduced by 1.  But those remaining slots can otherwise be filled with either black or gray dots as though the total number of slots was simply smaller by the number of red dots.  I.e., if there are $R$ red dots present, then there are $N - R$ slots remaining to be filled by either black or gray dots, which means that there are $P_2(N-R)$ total decks containing $R$ red dots.  We know that the value of $R$ can range from 0 to $N$, which means that the total value of $P_3(N)$ can be determined by a sum over multiple evaluations of the $P_2$ function (which we already know how to evaluate).  To use the 5-card deck as an example, we have:

$$
\begin{split}
  P_3(5) & = \sum_{i=0}^5 P_2(5-i) \\
  & = P_2(5) + P_2(4) + P_2(3) + P_2(2) + P_2(1) + P_2(0) \\
  & = (5+1) + (4+1) + (3+1) + (2+1) + (1+1) + (0+1) \\
  & = 21
\end{split}
$$

We can now generalize this procedure to determine $P_3(N)$:

$$
\begin{split}
  P_3(N) & = \sum_{i=0}^N P_2(N-i) \\
  & = \sum_{i=0}^N (N - i + 1) \\
  & = N + 1 + \sum_{i=1}^N (N - i + 1) \\
  & = 2 N + 1 + N^2 - \frac{1}{2} N (N+1) \\
  & = \frac{1}{2} (N+1) (N+2)
\end{split}
$$






